<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion – VAGUE D'OR</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="icon" href="../assets/images/logo.png">

      <!--=============== BOXICONS ===============-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css" />
    
    <!-- Google font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>

<section class="form-section">
    <div class="form-card">
        <h1>Connexion</h1>
        <p class="subtitle">Accédez à votre espace</p>

        <form id="login-form">
            <div class="form-group">
                <label for="login-email">Email</label>
                <input type="email" id="login-email" placeholder="johndoe@gmail.com" required>
            </div>

            <div class="form-group">
                <label for="login-password">Mot de passe</label>
                <input type="password" id="login-password" placeholder="********" required>
            </div>

            <label class="remember">
                <input type="checkbox" id="rememberMe">
                Se souvenir de moi
            </label>

            <button type="submit" class="btn-submit">
                <span class="btn-text">Se connecter</span>
                <span class="loader"></span>
            </button>
        </form>

        <p class="switch-form">
            Pas encore de compte ?
            <a href="inscription.html">Créer un compte</a>
        </p>
    </div>
</section>

    <script>
        const form = document.getElementById("login-form");
        const button = document.querySelector(".btn-submit");

        const remember = document.getElementById("rememberMe").checked;

        if (email === savedUser.email && password === savedUser.password) {

            if (remember) {
                localStorage.setItem("isLoggedIn", "true");
            } else {
                sessionStorage.setItem("isLoggedIn", "true");
            }

            window.location.href = "profile.html";
        }

        form.addEventListener("submit", (e) => {
            e.preventDefault();

            button.classList.add("loading");
            button.disabled = true;

            const email = document.getElementById("login-email").value;
            const password = document.getElementById("login-password").value;

            // Simulation chargement
            setTimeout(() => {
                const savedUser = JSON.parse(localStorage.getItem("userProfile"));

                if (!savedUser) {
                    showError("Aucun compte trouvé. Veuillez vous inscrire.");
                    return;
                }

                if (
                    email === savedUser.email &&
                    password === savedUser.password
                ) {
                    localStorage.setItem("isLoggedIn", "true");
                    alert("Connexion réussie !");
                    window.location.href = "profile.html";
                } else {
                    showError("Email ou mot de passe incorrect.");
                }

                button.classList.remove("loading");
                button.disabled = false;
            }, 1200);
        });

        function showError(message) {
            button.classList.remove("loading");
            button.disabled = false;
            alert(message);
        }

    </script>
</body>
</html>
